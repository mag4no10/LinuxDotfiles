(()=>{function t(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var r=[],a=!0,n=!1,o=void 0;try{for(var i,s=t[Symbol.iterator]();!(a=(i=s.next()).done)&&(r.push(i.value),!e||r.length!==e);a=!0);}catch(t){n=!0,o=t}finally{try{a||null==s.return||s.return()}finally{if(n)throw o}}return r}}(t,r)||function(t,r){if(t){if("string"==typeof t)return e(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?e(t,r):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,a=new Array(e);r<e;r++)a[r]=t[r];return a}chrome.runtime.onMessage.addListener((function(e,r,a){if("GET_BEATMAP_INFO"===e.action)try{var n=document.querySelector(".beatmapTab.active").getAttribute("href"),o=document.querySelector('img[src^="/pages/include/beatmap-rating-graph.php"]').getAttribute("src");a({status:"SUCCESS",beatmapId:t(n.match(/\/b\/(\d+)/i)||[],2)[1],beatmapSetId:t(o.match(/=(\d+)$/i)||[],2)[1]})}catch(t){a({status:"ERROR",error:{message:t.message,arguments:t.arguments,type:t.type,name:t.name,stack:t.stack}})}if("GET_BEATMAP_STATS"===e.action)try{a({status:"SUCCESS",beatmap:JSON.parse(document.getElementById("json-beatmapset").textContent).beatmaps.find((function(t){return t.id.toString()===e.beatmapId.toString()}))})}catch(t){a({status:"ERROR",error:{message:t.message,arguments:t.arguments,type:t.type,name:t.name,stack:t.stack}})}}))})();