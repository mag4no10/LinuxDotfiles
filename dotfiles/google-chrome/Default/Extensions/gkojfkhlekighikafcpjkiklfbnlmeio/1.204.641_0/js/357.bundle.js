// LICENSE_CODE ZON
"use strict";(self["webpackChunk"]=self["webpackChunk"]||[]).push([[357],{6357:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var underscore__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7439);var underscore__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(underscore__WEBPACK_IMPORTED_MODULE_0__);var _util_storage_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(8915);var _util_storage_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_util_storage_js__WEBPACK_IMPORTED_MODULE_1__);var _util_util_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1291);var _util_util_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_util_util_js__WEBPACK_IMPORTED_MODULE_2__);var _util_etask_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(6386);var _util_etask_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_util_etask_js__WEBPACK_IMPORTED_MODULE_3__);var _util_escape_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(4336);var _util_escape_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_util_escape_js__WEBPACK_IMPORTED_MODULE_4__);var _util_url_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(5305);var _util_url_js__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(_util_url_js__WEBPACK_IMPORTED_MODULE_5__);var _util_zerr_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(9824);var _util_zerr_js__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(_util_zerr_js__WEBPACK_IMPORTED_MODULE_6__);var _util_date_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(932);var _util_date_js__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(_util_date_js__WEBPACK_IMPORTED_MODULE_7__);var _util_array_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(6545);var _util_array_js__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(_util_array_js__WEBPACK_IMPORTED_MODULE_8__);var _util_string_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(5516);var _util_string_js__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(_util_string_js__WEBPACK_IMPORTED_MODULE_9__);var _util_hash_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(1889);var _util_hash_js__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(_util_hash_js__WEBPACK_IMPORTED_MODULE_10__);var _svc_vpn_pub_common_ui_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(4191);var _svc_vpn_pub_common_ui_js__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(_svc_vpn_pub_common_ui_js__WEBPACK_IMPORTED_MODULE_11__);var _svc_account_pub_membership_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(6467);var _svc_account_pub_membership_js__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(_svc_account_pub_membership_js__WEBPACK_IMPORTED_MODULE_12__);var _util_country_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(2569);var _util_country_js__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(_util_country_js__WEBPACK_IMPORTED_MODULE_13__);var _bext_pub_browser_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(1211);var _bext_pub_browser_js__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(_bext_pub_browser_js__WEBPACK_IMPORTED_MODULE_14__);var _svc_vpn_pub_util_js__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(843);var _svc_vpn_pub_util_js__WEBPACK_IMPORTED_MODULE_15___default=__webpack_require__.n(_svc_vpn_pub_util_js__WEBPACK_IMPORTED_MODULE_15__);var _bext_pub_util_js__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(7345);var _bext_pub_util_js__WEBPACK_IMPORTED_MODULE_16___default=__webpack_require__.n(_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_16__);var _bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(5250);var _bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_17___default=__webpack_require__.n(_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_17__);var _protocol_pub_countries_js__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(3958);var _protocol_pub_countries_js__WEBPACK_IMPORTED_MODULE_18___default=__webpack_require__.n(_protocol_pub_countries_js__WEBPACK_IMPORTED_MODULE_18__);var _bext_pub_backbone_js__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(6969);var _bext_pub_backbone_js__WEBPACK_IMPORTED_MODULE_19___default=__webpack_require__.n(_bext_pub_backbone_js__WEBPACK_IMPORTED_MODULE_19__);var _bext_vpn_ui_locale_js__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(8239);var conf__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(9641);
// LICENSE_CODE ZON
function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();normalCompletion=step.done;return step},e:function e(_e2){didErr=true;err=_e2},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return()}finally{if(didErr)throw err}}}}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_17___default().assert_ui("be_ui_api");_util_etask_js__WEBPACK_IMPORTED_MODULE_3___default().set_zerr(_util_zerr_js__WEBPACK_IMPORTED_MODULE_6___default());_util_zerr_js__WEBPACK_IMPORTED_MODULE_6___default().set_exception_handler("be",((id,info,err)=>perr(id,info,{err})));const E=new(_bext_pub_backbone_js__WEBPACK_IMPORTED_MODULE_19___default().model)({model_name:"ui_api"});const assign=Object.assign,root2url=_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_17___default().root2url,qw=_util_string_js__WEBPACK_IMPORTED_MODULE_9___default().qw;const _window=window,chrome=_window.chrome,CG=_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_16___default().CG,ms=_util_date_js__WEBPACK_IMPORTED_MODULE_7___default().ms;const www_host=conf__WEBPACK_IMPORTED_MODULE_21__.www_host;const v3=_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_16___default().is_v3;const ping_bg_api=()=>{if(!_bext_pub_browser_js__WEBPACK_IMPORTED_MODULE_14___default().use_msg)return;const et=_util_etask_js__WEBPACK_IMPORTED_MODULE_3___default().wait();const ping=()=>_bext_pub_browser_js__WEBPACK_IMPORTED_MODULE_14___default().backbone.client.ping("bg_ui_api",500,(ret=>{if(ret.error){_util_zerr_js__WEBPACK_IMPORTED_MODULE_6___default()("ping bg failed %s",_util_zerr_js__WEBPACK_IMPORTED_MODULE_6___default().json(ret));ping()}else et.continue()}));ping();return et};const init_bg_api=()=>_util_etask_js__WEBPACK_IMPORTED_MODULE_3___default()((function*(){let module;while(!(module=_bext_pub_browser_js__WEBPACK_IMPORTED_MODULE_14___default().backbone.client.start("bg_ui_api"))){_util_zerr_js__WEBPACK_IMPORTED_MODULE_6___default()(`bg_ui_api start failed, retrying`);yield _util_etask_js__WEBPACK_IMPORTED_MODULE_3___default().sleep(300)}if(!_bext_pub_browser_js__WEBPACK_IMPORTED_MODULE_14___default().use_msg)return module;const et=_util_etask_js__WEBPACK_IMPORTED_MODULE_3___default().wait();const cb=()=>{if(!module.get("_backbone_client_started"))return;module.off("change:_backbone_client_started",cb);et.continue()};module.on_init("change:_backbone_client_started",cb);yield et;return module}));let _date_diff;let update_ts=server_time_ts=>{if(server_time_ts)_date_diff=server_time_ts-performance.now()};E.now=()=>{if(_date_diff&&_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_16___default().check_min_ver(CG("use_server_ts_min_ver")))return Math.round(performance.now()+_date_diff);return Date.now()};E.init=()=>_util_etask_js__WEBPACK_IMPORTED_MODULE_3___default()((function*(){if(E.inited)return;E.inited=true;_bext_pub_browser_js__WEBPACK_IMPORTED_MODULE_14___default().init();yield ping_bg_api();E.bg_ui_api=yield init_bg_api();update_ts(yield E.get_server_ts());E.listenTo(E.bg_ui_api,"body_click",(e=>{if(_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_17___default().is_tpopup()&&e.connection_id==E.get_connection_id())E.trigger("body_click")}));E.listenTo(E.bg_ui_api,"trial_end",(trial=>_util_etask_js__WEBPACK_IMPORTED_MODULE_3___default()((function*(){if(yield E.trial_match_url(trial,E.get_url()))E.trigger("trial_end")}))));E.listenTo(E.bg_ui_api,"trial_wait_start",(trial=>_util_etask_js__WEBPACK_IMPORTED_MODULE_3___default()((function*(){if(yield E.trial_match_url(trial,E.get_url()))E.trigger("trial_wait_start")}))));E.listenTo(E.bg_ui_api,"trial_wait_stop",(trial=>_util_etask_js__WEBPACK_IMPORTED_MODULE_3___default()((function*(){if(yield E.trial_match_url(trial,E.get_url()))E.trigger("trial_wait_stop")}))));E.listenTo(E.bg_ui_api,"trial_wait_end",(trial=>_util_etask_js__WEBPACK_IMPORTED_MODULE_3___default()((function*(){if(yield E.trial_match_url(trial,E.get_url()))E.trigger("trial_wait_end",trial)}))));E.listenTo(E.bg_ui_api,"trial_start",(trial=>_util_etask_js__WEBPACK_IMPORTED_MODULE_3___default()((function*(){if(!(yield E.trial_match_url(trial,E.get_url())))return;if(yield E.get_trial_active(E.get_root_url()))E.trigger("trial_start")}))));E.listenTo(E.bg_ui_api,"trial_change",(trial=>_util_etask_js__WEBPACK_IMPORTED_MODULE_3___default()((function*(){if(!trial||(yield E.trial_match_url(trial,E.get_url())))E.trigger("trial_change",trial)}))));E.listenTo(E.bg_ui_api,"mitm_change",(root_url=>{if(E.get_root_url()==root_url)E.trigger("mitm_change")}));E.listenTo(E.bg_ui_api,"tab_url_updated",((id,url)=>{if(!_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_17___default().is_tpopup()||!url||id!=E.get_tab_id()||url==_util_util_js__WEBPACK_IMPORTED_MODULE_2___default().get(window,"hola.tpopup_opt.url")){return}_util_util_js__WEBPACK_IMPORTED_MODULE_2___default().set(window,"hola.tpopup_opt.url",url);E.trigger("url_changed")}));E.listenTo(E.bg_ui_api,"local_time_change",(ts=>update_ts(ts)));E.listenTo(E.bg_ui_api,"active_url_changed",(e=>E.trigger("url_changed")));const events=qw`force_trial mouseleave mouseenter url_changed
        tab_id_changed country_changed enabled_changed bg_main_inited
        user_changed membership_changed rule_changed ext_active_changed
        status_changed settings_changed tab_load_err vpn_status_changed
        svc_info_changed svc_version_changed protect_changed
        ext_conflict_changed agree_ts_changed dev_mode_changed set_tab_state
        location_changed ext_suspended_changed no_permission_changed
        bext_config_changed close_trial_suggestion trial_wait_start
        hide_ip_changed`;if(false){}events.forEach((event=>E.listenTo(E.bg_ui_api,event,((...args)=>E.trigger(event,...args)))));_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_16___default().set_ajax_cb((req=>E.perr_ajax(req)));_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_16___default().set_bext_config_cb((()=>E.get_bext_config()));_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_16___default().set_now_cb((()=>E.now()));yield _bext_vpn_ui_locale_js__WEBPACK_IMPORTED_MODULE_20__.Z.init();if(_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_17___default().is_tpopup()){_util_util_js__WEBPACK_IMPORTED_MODULE_2___default().set(window,"hola.tpopup_opt.url",yield E.get_tab_url(E.get_tab_id()))}E.update_full_browser_vpn_mode()}));E.uninit=()=>{if(!E.inited)return;E.inited=false;_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_16___default().set_ajax_cb(null);_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_16___default().set_bext_config_cb(null);var _iterator=_createForOfIteratorHelper(bg_et_active),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){let et=_step.value;et.return()}}catch(err){_iterator.e(err)}finally{_iterator.f()}bg_et_active=[];_bext_pub_browser_js__WEBPACK_IMPORTED_MODULE_14___default().backbone.client.stop("bg_ui_api");E.bg_ui_api=null;E.stopListening()};const perr=E.perr=(id,info,opt,new_name)=>wrap_etask(_util_etask_js__WEBPACK_IMPORTED_MODULE_3___default()((function*(){info=info||{};opt=opt||{};if(opt.with_log)opt=_objectSpread(_objectSpread({},opt),{},{ui_log:_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_16___default().get_zerr_log()});let _opt=opt,err=_opt.err;let bt=opt.bt||err&&_util_zerr_js__WEBPACK_IMPORTED_MODULE_6___default().e2s(err);if(err&&err.hola_info){bt="status "+err.hola_info.status+" "+err.hola_info.method+" "+err.hola_info.url+" text "+(""+err.hola_info.response_text).substr(0,256)+bt}if(opt.add_trial_info){let trial_info=yield E.get_trial_perr_info();if(trial_info.timeline)opt.filehead=trial_info.timeline+"\n\n"+(opt.filehead||"");assign(info,{cycle_stats:trial_info.cycle_stats,trial_state:trial_info.state})}if(err&&err.etask)err=underscore__WEBPACK_IMPORTED_MODULE_0___default().omit(err,"etask");opt=_objectSpread(_objectSpread({},opt),{},{is_tpopup:_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_17___default().is_tpopup(),err,bt});if(E.bg_ui_api){try{return yield wrap_etask(E.bg_ui_api.fcall("perr",[id,info,opt,new_name]))}catch(e){_util_zerr_js__WEBPACK_IMPORTED_MODULE_6___default()("bg perr failed "+_util_zerr_js__WEBPACK_IMPORTED_MODULE_6___default().e2s(e))}}return yield wrap_etask(_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_16___default().perr(id,info,opt,new_name))})));E.set_enabled=on=>{perr("be_ui_click_"+(on?"on":"off"));if(E.get_ext_conflict())return;E.bg_ui_api.fcall("set_enabled",[on])};E.login=(src,close)=>{let url=E.get_url();E.set_login_redirect(_util_url_js__WEBPACK_IMPORTED_MODULE_5___default().get_host(url));E.open_page(_util_url_js__WEBPACK_IMPORTED_MODULE_5___default().qs_add(E.hola_url()+"/signin",{utm_source:"holaext",utm_content:src,signin_redirect:true,next:url}));if(close)E.close_popup()};E.push_event=(name,opt)=>E.bg_ui_api.ecall("push_event",[name,opt]);E.close_popup=()=>{if(_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_17___default().is_tpopup())E.close_tpopup();else window.close()};E.open_about=()=>E.open_be_tab({url:"about.html",force_active:true});E.open_settings=()=>E.open_be_tab({url:"settings.html",force_active:true});E.open_page=(url,curr_tab)=>{if(curr_tab)E.update_tab(E.get_tab_id(),url);else E.open_new_tab({url,force_active:true})};E.open_plus_page=(root_url,ref)=>{E.ga_send("checkout",{step:5,option:(E.get_trial_ref_prefix()||"")+(ref||"")});E.open_page(E.plus_ref(ref,{root_url}))};E.search_popular=url=>_util_etask_js__WEBPACK_IMPORTED_MODULE_3___default()((function*(){yield E.set_force_suggestion(E.get_tab_id(),true);E.open_page(url,true);E.close_popup()}));E.open_popular=({root_url,src_country})=>_util_etask_js__WEBPACK_IMPORTED_MODULE_3___default()((function*(){let popular=yield E.get_popular_countries({root_url,src_country});let country=popular[0],url=root2url(root_url);yield E.unblock_action({url,country});E.open_page(url,true)}));E.open_ext_settings=()=>{E.open_new_tab({url:`chrome://extensions/?id=${chrome.runtime.id}`,force_active:true})};let force_trial=({url,root_url,tab_id,country,redirects,src})=>_util_etask_js__WEBPACK_IMPORTED_MODULE_3___default()((function*(){const is_tpopup=_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_17___default().is_tpopup();this.finally((()=>{if(!is_tpopup)E.close_popup()}));if(!is_tpopup&&(yield E.tpopup_is_connected(tab_id))){E.trigger_force_trial({country,tab_id});return this.return()}if(yield E.can_start_trial_silently(root_url)){try{if(yield E.start_trial(root_url)){yield bg_ui_api_call("unblock_action",{tab_id,url,country,src:src||"trial"});return}}catch(e){perr("be_ui_silent_trial_start_err",{root_url,country},{err:e})}}var _iterator2=_createForOfIteratorHelper(redirects),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){let r=_step2.value;yield E.set_site_storage(r,"force_trial",{country,tab_id,src})}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}if(is_tpopup)return void E.set_tpopup_type("watermark");let active=E.get_root_url();if(redirects.some((r=>_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_16___default().is_same_site(r,active)))){return yield E.do_tpopup(tab_id,root_url)}E.open_page(root2url(root_url),true)}));E.unblock_action=opt=>_util_etask_js__WEBPACK_IMPORTED_MODULE_3___default()((function*(){let tab_id=E.get_tab_id();let url=opt.url,country=opt.country,disable=opt.disable;let root_url=_svc_vpn_pub_util_js__WEBPACK_IMPORTED_MODULE_15___default().get_root_url(url);if(!E.get_ext_active()||E.get_ext_suspended()){perr("be_ui_vpn_set_enabled_mismatch");E.trigger("user_action_error");return}if(disable)perr("be_ui_vpn_stop",{root_url,country});if(false){}try{let is_stub=_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_17___default().is_stub_url(url,E.get_is_premium())&&!_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_16___default().full_browser_mode();if(!disable&&!is_stub&&(yield E.need_trial(root_url))){let redirects=[root_url];if(opt.redirects){var _iterator3=_createForOfIteratorHelper(opt.redirects),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){let u=_step3.value;let r=_svc_vpn_pub_util_js__WEBPACK_IMPORTED_MODULE_15___default().get_root_url(u);if(r!=root_url)redirects.push(r)}}catch(err){_iterator3.e(err)}finally{_iterator3.f()}}return yield force_trial({url,root_url,tab_id,country,redirects,src:opt.src})}yield bg_ui_api_call("unblock_action",_objectSpread({tab_id},opt));perr("be_ui_vpn_script_set_ok",assign({tab_id,root_url},opt))}catch(e){perr("be_ui_vpn_script_set_err",assign({tab_id,root_url},opt),{err:e});E.trigger("user_action_error",e)}}));E.get_all_countries=()=>{let blacklist=CG("exclude_countries")||[];return _protocol_pub_countries_js__WEBPACK_IMPORTED_MODULE_18___default().proxy_countries.bext.filter((c=>c.toLowerCase()!="kp"&&!blacklist.includes(c.toLowerCase())))};E.is_premium_country=country=>(CG("premium_countries")||[]).includes(country.toLowerCase());E.get_popular_ratings=({root_url,src_country})=>_util_etask_js__WEBPACK_IMPORTED_MODULE_3___default()((function*(){if(!root_url)return _bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_17___default().get_popular_country({});let rule_ratings=yield E.get_popup_rating_cache(root_url);if(!Array.isArray(rule_ratings)){try{let opt={root_url,src_country,limit:20,vpn_only:true};let rule=yield E.get_enabled_rule({tab_id:E.get_tab_id(),url:root2url(root_url)});if(rule&&rule.country)opt.proxy_country=rule.country;rule_ratings=yield E.get_rule_ratings(opt);yield E.set_popup_rating_cache(root_url,rule_ratings)}catch(e){perr("be_ui_vpn_rule_ratings_err",{root_url},{err:e})}}let invalid_countries=[];rule_ratings=Array.isArray(rule_ratings)&&rule_ratings.filter((r=>{let c=r.proxy_country.toUpperCase();if(_protocol_pub_countries_js__WEBPACK_IMPORTED_MODULE_18___default().proxy_countries.bext.includes(c))return true;invalid_countries.push(c)}));if(invalid_countries.length){perr("be_ui_vpn_rating_invalid_countries",{invalid_countries,rule_ratings},{rate_limit:{count:1}})}if(CG("disable_new_rule_ratings")){return _bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_17___default().get_popular_country_old({host:root_url,rule_ratings})}return _bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_17___default().get_popular_country({host:root_url,rule_ratings})}));const get_popular_by_ratings=({root_url,src_country,ratings,prev_country})=>{let site_conf=_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_16___default().get_site_conf(root_url);let suggestion_conf=_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_16___default().get_suggestion_conf(site_conf,src_country);let suggested=((suggestion_conf||{}).proxy||[]).filter((c=>c!="*"));let popular=ratings.map((r=>r.proxy_country));let res=suggested.concat(popular.filter((p=>!suggested.includes(p))));if(prev_country){const elm=prev_country.toUpperCase();_util_array_js__WEBPACK_IMPORTED_MODULE_8___default().rm_elm(res,elm);res.unshift(elm)}return res};E.get_popular_countries=({root_url,src_country,prev_country})=>_util_etask_js__WEBPACK_IMPORTED_MODULE_3___default()((function*(){let ratings=yield E.get_popular_ratings({root_url,src_country});return get_popular_by_ratings({root_url,src_country,ratings,prev_country})}));E.get_default_countries=({root_url,src_country,prev_country})=>{let ratings=_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_17___default().get_popular_country({host:root_url});return get_popular_by_ratings({root_url,src_country,ratings,prev_country})};E.get_popular_sites=limit=>_util_etask_js__WEBPACK_IMPORTED_MODULE_3___default()((function*(){let list=(yield E.get_unblocking_rate(limit||6))||[];let root_urls=list.map((p=>p.root_url));return{list,top_urls:root_urls}}));E.get_redirect_urls=()=>_util_etask_js__WEBPACK_IMPORTED_MODULE_3___default()((function*(){if(_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_17___default().is_tpopup())return[];let list,tab_id=E.get_tab_id();list=yield E.get_redirect_list(tab_id);if(!list||!list.length)return[];list=list.map(root2url).filter((u=>!_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_17___default().is_skip_url(u)));list.push(E.get_url());var _iterator4=_createForOfIteratorHelper(list),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){let url=_step4.value;if(yield E.get_force_premium_rule(_svc_vpn_pub_util_js__WEBPACK_IMPORTED_MODULE_15___default().get_root_url(url),{tab_url:url})){return[]}}}catch(err){_iterator4.e(err)}finally{_iterator4.f()}return list}));E.click_working=({src})=>_util_etask_js__WEBPACK_IMPORTED_MODULE_3___default()((function*(){let url=E.get_url(),tab_id=E.get_tab_id();yield E.increment_vpn_work_yes();let rule=yield E.get_enabled_rule({tab_id,url});E.send_vpn_work_report({rule,src})}));E.click_not_working=({src,send_logs,src_country})=>_util_etask_js__WEBPACK_IMPORTED_MODULE_3___default()((function*(){let url=E.get_url(),tab_id=E.get_tab_id();let root_url=_svc_vpn_pub_util_js__WEBPACK_IMPORTED_MODULE_15___default().get_root_url(url);try{let rule=yield E.get_enabled_rule({tab_id,url});if(!rule){return void perr("be_ui_vpn_no_rule",{country:src_country,root_url,url})}E.fix_vpn({rule,root_url,url,tab_id,src_country});E.trigger_not_working({tab_id,src});E.send_fix_it_report({rule,send_logs,src})}catch(e){perr("be_ui_vpn_fix_it_err",{tab_id,root_url},{err:e});E.trigger("user_action_error",e)}}));E.click_star=rating=>{E.set_vpn_last_rating(rating);if(rating==5&&!E.get_rate_on_store())E.open_rate_us()};E.need_rating=()=>{if(E.get_is_premium())return false;let vpn_work_yes=E.get_vpn_work_yes()||0;let rating=E.get_vpn_last_rating()||0;return rating<5&&vpn_work_yes%4==1};E.open_report_problem=()=>{perr("be_report_problem",{},{rate_limit:{count:1}});let url="about.html?"+_util_escape_js__WEBPACK_IMPORTED_MODULE_4___default().qs({url:E.get_url()});E.open_be_tab({url:url+"#report_issue",force_active:true})};E.get_force_premium_rule=(root_url,opt)=>_util_etask_js__WEBPACK_IMPORTED_MODULE_3___default()((function*(){if(E.get_is_premium())return false;return yield E.bg_ui_api.ecall("get_force_premium_rule",[root_url,opt])}));E.need_tpopup_hint=()=>!_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_17___default().get_tpopup_type();E.tpopup_close_click=src=>_util_etask_js__WEBPACK_IMPORTED_MODULE_3___default()((function*(){const type=_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_17___default().get_tpopup_type();if(type=="watermark"||type=="suggestion")return void E.set_tpopup_type("watermark");const root_url=E.get_root_url();const period=E.get_is_premium()?"default":"session";yield E.set_dont_show_again({root_url,src,period,tab_id:E.get_tab_id(),type:null});E.close_tpopup(true)}));E.tpopup_close_hint_click=root_url=>_util_etask_js__WEBPACK_IMPORTED_MODULE_3___default()((function*(){yield E.set_dont_show_again({root_url,period:"default",src:"x_tooltip",type:null});E.close_tpopup(true)}));E.allow_skip_url=trial_state=>{let url=E.get_url();if(_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_17___default().is_hola_url(url)){let stub_rule_on_hola_site=CG("stub_rule_on_hola_site")||_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_16___default().get_trial_conf(E.get_root_url(),trial_state,"stub_rule_on_hola_site");if(stub_rule_on_hola_site)return true}return _bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_17___default().is_new_tab(url)};E.set_locale=l=>{if(l==_bext_vpn_ui_locale_js__WEBPACK_IMPORTED_MODULE_20__.Z.locale)return;perr("be_popup_lang",{locale:l},{rate_limit:{count:20}});_bext_vpn_ui_locale_js__WEBPACK_IMPORTED_MODULE_20__.Z.set_locale(l)};E.get_locale=()=>_bext_vpn_ui_locale_js__WEBPACK_IMPORTED_MODULE_20__.Z.locale;E.get_locales=()=>_bext_vpn_ui_locale_js__WEBPACK_IMPORTED_MODULE_20__.Z.locales;E.resize_tpopup=opt=>_util_etask_js__WEBPACK_IMPORTED_MODULE_3___default()((function*(){try{return yield E.bg_ui_api.ecall("resize_tpopup",[E.get_connection_id(),opt])}catch(e){console.error("resize_tpopup err %o",e)}}));E.show_tpopup=()=>E.bg_ui_api.ecall("show_tpopup",[E.get_connection_id()]);E.close_tpopup=hide_anim=>_util_etask_js__WEBPACK_IMPORTED_MODULE_3___default()((function*(){if(_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_17___default().get_tpopup_mode()=="window")return window.close();if(hide_anim){document.body.classList.add("hide_anim");yield _util_etask_js__WEBPACK_IMPORTED_MODULE_3___default().sleep(1e3)}if(E.bg_ui_api)E.bg_ui_api.ecall("close_tpopup",[E.get_connection_id()]);else _util_zerr_js__WEBPACK_IMPORTED_MODULE_6___default()("cannot close tpopup: no bg_ui_api")}));E.no_country_perr=()=>{perr("be_ui_vpn_no_country",{url:E.get_url(),be_info:{country:E.get_country(),location:E.get_location()},status:{rmt:E.get_bg_main_status()+" "+(E.get_bg_main_inited()?"inited":"not_inited"),be_vpn:E.get_vpn_status(),be_rule:E.get_rule_status(),be_info:E.get_info_status()}})};E.is_busy=()=>_util_etask_js__WEBPACK_IMPORTED_MODULE_3___default()((function*(){return(yield E.get_busy_info()).busy}));E.get_busy_info=()=>_util_etask_js__WEBPACK_IMPORTED_MODULE_3___default()((function*(){let info={rule_status_opt:E.get_rule_status_opt(),rule_busy:E.get_rule_status()=="busy",ext_busy:E.get_info_status()=="busy",main_busy:E.get_bg_main_status()=="busy",svc_busy:E.get_svc_status()=="busy"};info.tab_state=yield E.get_tab_state(E.get_tab_id());info.stoppping=_util_util_js__WEBPACK_IMPORTED_MODULE_2___default().get(info.rule_status_opt,"desc","").includes("Stopping")||info.tab_state=="disable_rule";info.error=info.tab_state&&info.tab_state.includes("err");info.busy=info.ext_busy||info.main_busy||E.get_enabled()&&!info.error&&!info.stoppping&&(info.tab_state!="idle"||info.rule_busy||info.svc_busy);return info}));E.reload_ext=(opt,force)=>{const do_reload=()=>{_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_17___default().set_timeout((()=>{try{_util_zerr_js__WEBPACK_IMPORTED_MODULE_6___default().notice("going for full reload")}catch(e){}_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_16___default().reload_ext_native()}),500)};if(_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_16___default().reload_ext(do_reload,force?100:ms.DAY)){perr("be_popup_reload_ext","r."+opt.info,{rate_limit:{count:20},err:new Error("")})}};E.send_issue_report=info=>_util_etask_js__WEBPACK_IMPORTED_MODULE_3___default()((function*(){try{info.bg_log=yield E.get_log()}catch(e){info.bg_log_err=e}perr("be_issue_report",info)}));E.get_problem_mailto_url=opt=>_util_etask_js__WEBPACK_IMPORTED_MODULE_3___default()((function*(){opt=opt||{};const info=yield E.get_product_info();return _util_escape_js__WEBPACK_IMPORTED_MODULE_4___default().mailto_url({to:opt.to||"help_be@"+www_host,subject:"Problem with Hola extension",body:"(Please include a brief explanation of the problem and "+"a screenshot if possible)\n\n"+"Information automatically generated about my problem:\n"+info.map((item=>`${item.name}: ${item.value}`)).join("\n")})}));E.aj_event=id=>{perr(id)};E.get_connection_id=()=>_util_util_js__WEBPACK_IMPORTED_MODULE_2___default().get(window,"hola.tpopup_opt.connection_id");E.set_tpopup_type=type=>E.trigger("set_tpopup_type",type);E.get_trial_left=trial=>trial?Math.max(trial.expire_ts-E.now(),0):0;E.get_root_url=()=>_svc_vpn_pub_util_js__WEBPACK_IMPORTED_MODULE_15___default().get_root_url(E.get_url())||"";E.get_url=()=>_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_17___default().is_tpopup()?_util_util_js__WEBPACK_IMPORTED_MODULE_2___default().get(window,"hola.tpopup_opt.url"):E.get_active_tab_url()||"";E.get_tab_id=()=>_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_17___default().is_tpopup()?_util_util_js__WEBPACK_IMPORTED_MODULE_2___default().get(window,"hola.tpopup_opt.tab_id"):E.get_active_tab_id();E.reload_tab=tab_id=>E.reload_tab_by_id(tab_id||E.get_tab_id());E.is_tab_active=()=>E.get_active_tab_id()==E.get_tab_id();E.get_timings=()=>{const res={};if(!performance.getEntriesByType)return res;var _iterator5=_createForOfIteratorHelper(performance.getEntriesByType("mark")),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){let item=_step5.value;res[item.name+"_ms"]=Math.round(item.startTime)}}catch(err){_iterator5.e(err)}finally{_iterator5.f()}return res};E.get_vpn_tpopup_initial_size=()=>({width:360,height:545});E.plus_ref=(ref,extra)=>{ref=(E.get_trial_ref_prefix()||"")+(ref||"");return _util_escape_js__WEBPACK_IMPORTED_MODULE_4___default().uri(E.hola_url()+"/plus",assign({ref,uuid:E.get_uuid()},extra))};E.is_fullscreen=()=>_util_util_js__WEBPACK_IMPORTED_MODULE_2___default().get(window,"hola.tpopup_opt.fullscreen");const get_watermark_pos_key=(url,pos_conf)=>{if(!url||!pos_conf)return;if(E.is_fullscreen()&&pos_conf.fullscreen)return"fullscreen";let pathname=_util_url_js__WEBPACK_IMPORTED_MODULE_5___default().parse(url).pathname;let keys=Object.keys(pos_conf);for(var _i=0,_keys=keys;_i<_keys.length;_i++){let key=_keys[_i];let re=_util_url_js__WEBPACK_IMPORTED_MODULE_5___default().http_glob_host(key);if(new RegExp("^"+re+"$").test(pathname))return key}};E.get_watermark_pos=url=>_util_etask_js__WEBPACK_IMPORTED_MODULE_3___default()((function*(){let root_url=_svc_vpn_pub_util_js__WEBPACK_IMPORTED_MODULE_15___default().get_root_url(url);let pos;let pos_conf=_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_16___default().get_site_conf(root_url,"watermark.pos")||{};let pos_key=get_watermark_pos_key(url,pos_conf);if(pos_key&&(pos=yield E.get_site_storage(root_url,`${pos_key}_watermark_pos`))){return pos}if(pos_key&&(pos=pos_conf[pos_key]))return pos;if(pos=yield E.get_site_storage(root_url,"watermark_pos"))return pos;if(pos=pos_conf.default)return pos;return CG(`geo_popup.watermark.position`)||"bottom_right"}));E.set_watermark_pos=(url,pos)=>_util_etask_js__WEBPACK_IMPORTED_MODULE_3___default()((function*(){let root_url=_svc_vpn_pub_util_js__WEBPACK_IMPORTED_MODULE_15___default().get_root_url(url);let pos_conf=_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_16___default().get_site_conf(root_url,"watermark.pos")||{};let pos_key=get_watermark_pos_key(url,pos_conf);yield E.set_site_storage(root_url,pos_key?`${pos_key}_watermark_pos`:"watermark_pos",pos)}));E.request_permission=()=>_util_etask_js__WEBPACK_IMPORTED_MODULE_3___default()((function*(){let res=yield _util_etask_js__WEBPACK_IMPORTED_MODULE_3___default().cb_apply(chrome.permissions.request,[{origins:[v3?"*://*/*":"<all_urls>"]}]);perr(res?"be_request_permission_allowed":"be_request_permission_denied")}));E.trigger_bg=(...args)=>E.bg_ui_api&&E.bg_ui_api.ecall("trigger",[...args]);let render_perr_sent=false;E.send_render_stats=()=>{if(render_perr_sent)return;let count=(_util_storage_js__WEBPACK_IMPORTED_MODULE_1___default().get_int("ui_popup_render_count")||0)+1;_util_storage_js__WEBPACK_IMPORTED_MODULE_1___default().set("ui_popup_render_count",count);let err=window.hola.err,info=E.get_timings();_util_util_js__WEBPACK_IMPORTED_MODULE_2___default().if_set(_util_util_js__WEBPACK_IMPORTED_MODULE_2___default().get(err,"require"),info,"require");_util_util_js__WEBPACK_IMPORTED_MODULE_2___default().if_set(count,info,"count");let is_tpopup=_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_17___default().is_tpopup();let url=E.get_url(),root_url=_svc_vpn_pub_util_js__WEBPACK_IMPORTED_MODULE_15___default().get_root_url(url);perr("be_popup_render"+(info.popup_render_ms>4e3?"_slow":""),info);if(is_tpopup)perr("be_tpopup_open",{root_url,url});else E.set_has_opened_popup();E.push_event(is_tpopup?"tpopup_render":"popup_render",{url});render_perr_sent=true};const get_payment_conf=trial_state=>{if(!trial_state)return CG("payment",{});let trial_payment_conf=_bext_pub_util_js__WEBPACK_IMPORTED_MODULE_16___default().get_trial_conf(E.get_root_url(),trial_state,"payment",{});if(!trial_payment_conf)return CG("payment",{});return assign({},CG("payment"),trial_payment_conf)};const get_replace_plan_conf=rp=>{if(!rp||!rp.bext||!rp.on)return;if(rp.on==1)return rp.replace;const uuid=E.get_uuid();if(!uuid)return;return _util_hash_js__WEBPACK_IMPORTED_MODULE_10___default().hash_string(uuid)%100/100<rp.on?rp.replace:null};E.get_plans=(for_trial,trial_state)=>{let payment_conf=get_payment_conf(trial_state);let plan_ids=for_trial?payment_conf.trial_plan_ids||["3y","1y","1m"]:payment_conf.watermark_plan_ids||["3y","1y","1m"];let all_plans=payment_conf.all_plans||[{period:"1 M",id:"1m",price:11.95},{period:"1 Y",id:"1y",price:83.88}];return _svc_vpn_pub_common_ui_js__WEBPACK_IMPORTED_MODULE_11___default().fill_plans_info(plan_ids,all_plans,{replace_plan:get_replace_plan_conf(payment_conf.replace_plan_conf),add:{ip:CG("ip")}})};E.get_best_plan=plans=>underscore__WEBPACK_IMPORTED_MODULE_0___default().min(plans,(p=>p.month_price==null?undefined:p.month_price));E.get_bonus_plan=()=>{let plan_ids=[CG("payment.bonus_plan_id")||"1y"].concat(CG("payment.trial_plan_ids",["3y","1y","1m"]));let all_plans=CG("payment.all_plans",[{period:"1 Y",id:"1y",price:83.88}]);return _svc_vpn_pub_common_ui_js__WEBPACK_IMPORTED_MODULE_11___default().fill_plans_info(plan_ids,all_plans,{replace_plan:get_replace_plan_conf(CG("payment.replace_plan_conf")),add:{ip:CG("ip")}})[0]};let canvas;const get_text_width=(text,font)=>{if(!text)return 0;canvas=canvas||document.createElement("canvas");let context=canvas.getContext("2d");context.font=font;let metrics=context.measureText(text);return Math.ceil(metrics.width)};E.get_font_size=(text,style,max_width)=>{let font_size=parseInt(style.fontSize,10);let width=get_text_width(text,`${style.fontWeight} ${style.fontSize} ${style.fontFamily}`);return width>max_width?Math.floor(font_size*max_width/width):font_size};E.format_price=(price,prefix)=>price?prefix+price.toFixed(2):"";E.time2str=(t,round_days)=>{let n,str;if(t<ms.MIN){n=Math.round(t/ms.SEC);str="second"}else if(t<ms.HOUR){n=Math.round(t/ms.MIN);str="minute"}else if(!round_days||t<ms.DAY){n=Math.round(t/ms.HOUR);str="hour"}else{n=Math.round(t/ms.DAY);str="day"}if(n!=1)str+="s";return`${n} ${str}`};E.get_user_currency=src_country=>{let currency=(_util_country_js__WEBPACK_IMPORTED_MODULE_13___default().code2currency(src_country||"")||"").toLowerCase();return _svc_account_pub_membership_js__WEBPACK_IMPORTED_MODULE_12___default().get_plan_currency(E.get_plans()[0],currency)};E.get_local_price=(user_currency,plan)=>{let price=plan.price,month_price=plan.month_price,regular_price=plan.regular_price,discount_percent=plan.discount_percent;let prefix="$";let local_price=user_currency&&plan.currency&&plan.currency[user_currency.toLowerCase()];if(local_price&&local_price.price){price=local_price.price;month_price=local_price.month_price;regular_price=local_price.regular_price;discount_percent=local_price.discount_percent;prefix=_util_country_js__WEBPACK_IMPORTED_MODULE_13___default().currency2prefix(user_currency).toUpperCase()}return{price,month_price,regular_price,prefix,discount_percent}};E.need_trial_dialog=root_url=>_util_etask_js__WEBPACK_IMPORTED_MODULE_3___default()((function*(){return _bext_pub_util_js__WEBPACK_IMPORTED_MODULE_16___default().check_min_ver(CG("ext_trial_dialog_min_ver"))&&!_bext_vpn_util_util_js__WEBPACK_IMPORTED_MODULE_17___default().is_tpopup()&&(yield E.need_trial(root_url))&&(yield E.is_trial_expired(root_url))&&!(yield E.trial_need_signin(root_url))}));E.hola_hostname=()=>{if(CG("disable_hola_hostname_fallback"))return www_host;return E.get_hola_conn_hostname()||www_host};E.hola_url=()=>"https://"+E.hola_hostname();E.is_signup_bonus_allowed=()=>!E.get_user()&&!_util_util_js__WEBPACK_IMPORTED_MODULE_2___default().get(E.get_uuid_info(),"has_user");const bg_attributes=qw`is_premium is_ultra ext_active enabled bext_config
    vpn_countries uuid active_tab_url active_tab_id rules user membership
    vpn_last_rating rate_on_store country location user_id trial_ref_prefix
    dev_mode agree_ts ext_conflict svc_info svc_version
    vpn_status rule_status rule_status_opt
    info_status svc_status bg_main_status bg_main_inited vpn_work_yes
    rate_us_count ext_suspended no_permission uuid_info hola_conn_hostname
    install_ts install_version`;bg_attributes.forEach((attr=>E["get_"+attr]=()=>E.bg_ui_api&&E.bg_ui_api.get(attr)));let bg_functions=qw`get_tab_load_err get_enabled_rule send_vpn_work_report
    send_fix_it_report trigger_not_working set_dont_show_again
    get_dont_show_rules is_dont_show get_rule_ratings fix_vpn set_rule
    fetch_rules rule_task_cancel_all force_bext_config_update
    stop_vpn pause_videos resume_videos hide_arrow_anim
    show_arrow_anim close_tab_tpopup get_trial_active set_trial
    get_trial_wait is_watermark_small get_next_trial_ts
    move_trial_time is_trial_expired get_trials_info refresh_user
    refresh_anonymous logout resend_verification_email set_vpn_last_rating
    get_redirect_list mitm_set_ignore mitm_set_unblock mitm_remove_rule
    set_login_redirect set_email_verify_url get_mitm_rules
    get_unblocking_rate_url get_unblocking_rate set_dev_mode update_svc_info
    is_paid set_enabled_for_browser get_disabled_rule
    tpopup_is_connected hola_api_call perr_ajax
    bg_vpn_recover ga_send set_agree_ts bg_main_recover open_new_tab
    open_be_tab open_rate_us open_web_store update_tab get_log
    set_force_suggestion do_tpopup vpn_change_agent trigger_force_trial
    need_trial get_force_premium_rules increment_vpn_work_yes get_tab_state
    get_product_info reset_trial is_incognito_allowed trial_match_url
    set_rate_us_count is_verified get_site_storage set_site_storage
    get_popup_rating_cache set_popup_rating_cache need_upgrade_msg
    click_upgrade init_monitor_active uninit_monitor_active set_dbg_conf
    get_dbg_conf reset_rate_us get_storage_locale set_storage_locale
    open_login_popup get_tab_url is_hide_ip_active set_hide_ip
    trial_need_signin get_trial_period get_last_trial_end_ts
    get_server_ts get_total_cycle_time get_used_cycle_time is_watermark_popcorn
    get_remaining_cycle_time get_trial_perr_info get_selected_url
    trial_start_wait trial_stop_wait is_trial_wait_ended is_watermark_hidden
    trial_hide_watermark can_hide_watermark can_skip_signin skip_signin
    get_used_trial_time close_bonus_tooltip get_debug_peer_info change_peer
    get_mitm_dialog reload_tab_by_id focus_on_tab set_has_opened_popup
    get_smart_suggestions need_ext_pin_tip shown_ext_pin_tip
    is_unlimited_trial debug_set_install_ts debug_set_install_ver
    update_full_browser_vpn_mode close_rating_popup can_start_trial_silently
    start_trial dev_get dev_set dev_force_tpopup get_src_country_excluded`;if(false){}const bg_et_parent=conf__WEBPACK_IMPORTED_MODULE_21__.firefox_web_ext&&qw`get_unblocking_rate
    unblock_action set_trial get_trial_perr_info check_unblockig_rate
    get_tpopup_opt`;let bg_et_active=[];const wrap_etask=(e,name)=>_util_etask_js__WEBPACK_IMPORTED_MODULE_3___default()((function*(){if(!e)return;if(!conf__WEBPACK_IMPORTED_MODULE_21__.firefox_web_ext)return yield e;this.on("finally",(()=>{let idx=bg_et_active.indexOf(this);if(idx!=-1)bg_et_active.splice(idx,1)}));e.spawn_parent(this);bg_et_active.push(this);return yield e}));const bg_ui_api_call=(f,...args)=>{let e=E.bg_ui_api&&E.bg_ui_api.ecall(f,[...args]);if(bg_et_parent&&bg_et_parent.includes(f)&&e&&e.constructor&&e.constructor.name=="Etask"){return wrap_etask(e,f)}return e};bg_functions.forEach((f=>E[f]=(...args)=>bg_ui_api_call(f,...args)));const __WEBPACK_DEFAULT_EXPORT__=E}}]);
//# sourceMappingURL=https://hola.org/be_source_map/1.204.641/357.bundle.js.map?build=nopeer